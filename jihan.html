<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RegCompass SME - Compliance Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <!-- Custom Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
        }
        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        .sidebar-icon {
            stroke-width: 1.5;
        }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <!-- Sidebar Navigation -->
    <aside class="w-64 bg-slate-900 text-slate-300 flex flex-col p-4 flex-shrink-0">
        <div class="flex items-center gap-3 mb-8">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-sky-400"><path d="m12 19-7-7 7-7 7 7-7 7Z"/><path d="m19 12-7 7-7-7"/><path d="m5 12 7-7 7 7"/></svg>
            <h1 class="text-xl font-bold text-white">RegCompass</h1>
        </div>

        <nav class="flex-grow">
            <ul class="space-y-2">
                <li><a href="#dashboard" class="nav-link active flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700 transition-colors duration-200"><i data-lucide="layout-dashboard" class="sidebar-icon"></i>Dashboard</a></li>
                <li><a href="#compliance" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700 transition-colors duration-200"><i data-lucide="shield-check" class="sidebar-icon"></i>Compliance</a></li>
                <li><a href="#surveillance" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700 transition-colors duration-200"><i data-lucide="siren" class="sidebar-icon"></i>Surveillance</a></li>
                <li><a href="#analytics" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700 transition-colors duration-200"><i data-lucide="bar-chart-3" class="sidebar-icon"></i>Analytics</a></li>
                <li><a href="#reporting" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700 transition-colors duration-200"><i data-lucide="file-text" class="sidebar-icon"></i>Reporting</a></li>
            </ul>
        </nav>

        <div class="border-t border-slate-700 pt-4">
             <div class="flex items-center gap-3">
                <img src="https://placehold.co/40x40/64748b/ffffff?text=U" alt="User" class="rounded-full">
                <div>
                    <p class="font-semibold text-white">SME Broker Inc.</p>
                    <a href="#" class="text-xs text-sky-400 hover:underline">View Profile</a>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto p-8">
        <!-- Dashboard View -->
        <div id="dashboard" class="page-content">
            <h2 class="text-3xl font-bold text-slate-800 mb-2">Dashboard Overview</h2>
            <p class="text-slate-500 mb-8">Here's your brokerage's health at a glance.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Compliance Health Score Card -->
                <div class="bg-white p-6 rounded-xl shadow-md flex flex-col items-center justify-center text-center">
                    <h3 class="font-semibold text-slate-600 mb-2">Compliance Health</h3>
                    <div id="healthScore" class="text-5xl font-bold text-green-500">92</div>
                    <p class="text-sm text-slate-500 mt-2">Excellent Standing</p>
                </div>
                <!-- Other Stat Cards -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-600 mb-2">Daily Turnover</h3>
                    <p class="text-3xl font-bold text-slate-800">₹ 1.2 Cr</p>
                    <p class="text-sm text-green-500 flex items-center mt-2"><i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>+5.2% vs yesterday</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-600 mb-2">Active Clients</h3>
                    <p class="text-3xl font-bold text-slate-800">1,420</p>
                    <p class="text-sm text-slate-500 mt-2">+12 new this week</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-600 mb-2">Pending Alerts</h3>
                    <p class="text-3xl font-bold text-red-500">3</p>
                    <p class="text-sm text-slate-500 mt-2">Needs immediate attention</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Real-time Surveillance Alerts -->
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-800 mb-4">Real-time Surveillance Alerts</h3>
                    <div id="dashboard-alerts" class="space-y-4">
                        <!-- JS will populate this -->
                    </div>
                </div>

                <!-- Compliance Checklist -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-800 mb-4">Compliance Status</h3>
                     <div class="space-y-4">
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-medium text-slate-700">KYC/AML Checks</span>
                                <span class="text-sm font-medium text-slate-700">98%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-blue-600 h-2.5 rounded-full" style="width: 98%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-medium text-slate-700">Margin Reporting</span>
                                <span class="text-sm font-medium text-slate-700">100%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-green-600 h-2.5 rounded-full" style="width: 100%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-medium text-slate-700">Contract Notes</span>
                                <span class="text-sm font-medium text-slate-700">95%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-blue-600 h-2.5 rounded-full" style="width: 95%"></div></div>
                        </div>
                         <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-medium text-slate-700">UCC Upload</span>
                                <span class="text-sm font-medium text-slate-700">85%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-yellow-500 h-2.5 rounded-full" style="width: 85%"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Compliance View -->
        <div id="compliance" class="page-content hidden">
            <h2 class="text-3xl font-bold text-slate-800 mb-8">Compliance Checklist</h2>
            <div class="bg-white p-6 rounded-xl shadow-md">
                <table class="w-full text-left">
                    <thead>
                        <tr class="border-b">
                            <th class="p-4">Task</th>
                            <th class="p-4">Frequency</th>
                            <th class="p-4">Due Date</th>
                            <th class="p-4">Status</th>
                            <th class="p-4">Action</th>
                        </tr>
                    </thead>
                    <tbody id="compliance-table">
                        <!-- JS will populate this -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Surveillance View -->
        <div id="surveillance" class="page-content hidden">
            <h2 class="text-3xl font-bold text-slate-800 mb-8">AI Surveillance Center</h2>
            <div class="bg-white p-6 rounded-xl shadow-md">
                <table class="w-full text-left">
                    <thead>
                        <tr class="border-b">
                            <th class="p-4">Alert Type</th>
                            <th class="p-4">Client ID</th>
                            <th class="p-4">Details</th>
                            <th class="p-4">Timestamp</th>
                            <th class="p-4">Severity</th>
                        </tr>
                    </thead>
                    <tbody id="surveillance-table">
                        <!-- JS will populate this -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Analytics View -->
        <div id="analytics" class="page-content hidden">
            <h2 class="text-3xl font-bold text-slate-800 mb-8">Business Analytics</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-800 mb-4">Monthly Brokerage Revenue (₹ Lakhs)</h3>
                    <canvas id="revenueChart"></canvas>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-800 mb-4">Top Traded Securities</h3>
                    <canvas id="securitiesChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Reporting View -->
        <div id="reporting" class="page-content hidden">
            <h2 class="text-3xl font-bold text-slate-800 mb-8">One-Click Reporting</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                 <div class="bg-white p-6 rounded-xl shadow-md text-center">
                    <i data-lucide="file-check-2" class="w-12 h-12 text-blue-500 mx-auto mb-4"></i>
                    <h3 class="font-semibold text-slate-800 mb-2">Suspicious Transaction Report (STR)</h3>
                    <p class="text-sm text-slate-500 mb-4">Generate and file STRs for flagged activities.</p>
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Generate Report</button>
                 </div>
                 <div class="bg-white p-6 rounded-xl shadow-md text-center">
                    <i data-lucide="users" class="w-12 h-12 text-green-500 mx-auto mb-4"></i>
                    <h3 class="font-semibold text-slate-800 mb-2">Client Holding Report</h3>
                    <p class="text-sm text-slate-500 mb-4">Consolidated report of all client holdings.</p>
                    <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">Generate Report</button>
                 </div>
                 <div class="bg-white p-6 rounded-xl shadow-md text-center">
                    <i data-lucide="landmark" class="w-12 h-12 text-indigo-500 mx-auto mb-4"></i>
                    <h3 class="font-semibold text-slate-800 mb-2">Margin Trading Report</h3>
                    <p class="text-sm text-slate-500 mb-4">Daily report on margin utilization and shortfalls.</p>
                    <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">Generate Report</button>
                 </div>
            </div>
        </div>


    </main>

<script>
    // --- MOCK DATA ---
    const mockSurveillanceAlerts = [
        { type: "High Volume Anomaly", client: "CL-5829", details: "Trade in INFY 500% above 30-day avg.", timestamp: "2025-09-06 14:30:15", severity: "High" },
        { type: "Potential Circular Trading", client: "CL-1052", details: "Opposing trades in TATAMOTORS within 2 mins.", timestamp: "2025-09-06 11:15:05", severity: "High" },
        { type: "Frequent Loss-Making Trades", client: "CL-8874", details: "Client booking small losses repeatedly in options.", timestamp: "2025-09-06 10:05:45", severity: "Medium" },
        { type: "Trade in Banned Scrip", client: "CL-2311", details: "Attempted trade in scrip under ASM list.", timestamp: "2025-09-05 09:20:00", severity: "Low" }
    ];

    const mockComplianceTasks = [
        { task: "Daily Margin Reporting", freq: "Daily", due: "Today, EOD", status: "Completed", color: "green" },
        { task: "UCC Details Upload for new clients", freq: "Daily", due: "Today, EOD", status: "Pending", color: "yellow" },
        { task: "Monthly Client Holding Statement", freq: "Monthly", due: "2025-09-10", status: "On Track", color: "blue" },
        { task: "Quarterly Settlement", freq: "Quarterly", due: "2025-10-05", status: "On Track", color: "blue" },
        { task: "Annual AML Audit", freq: "Annually", due: "2025-12-15", status: "Pending", color: "yellow" }
    ];
    
    // --- PAGE SETUP & NAVIGATION ---
    document.addEventListener('DOMContentLoaded', () => {
        const navLinks = document.querySelectorAll('.nav-link');
        const pageContents = document.querySelectorAll('.page-content');
        
        const changePage = (hash) => {
            pageContents.forEach(page => page.classList.add('hidden'));
            navLinks.forEach(link => link.classList.remove('active', 'bg-slate-700', 'text-white'));
            
            const activePage = document.querySelector(hash || '#dashboard');
            const activeLink = document.querySelector(`a[href="${hash || '#dashboard'}"]`);

            if (activePage) activePage.classList.remove('hidden');
            if (activeLink) activeLink.classList.add('active', 'bg-slate-700', 'text-white');

            // Initialize charts only when analytics page is active
            if (hash === '#analytics') {
                initAnalyticsCharts();
            }
        };

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const hash = e.currentTarget.getAttribute('href');
                window.location.hash = hash;
                changePage(hash);
            });
        });

        // Initial page load
        const initialHash = window.location.hash || '#dashboard';
        changePage(initialHash);

        // Render dynamic content
        renderDashboardAlerts();
        renderComplianceTable();
        renderSurveillanceTable();
        
        // Activate Lucide Icons
        lucide.createIcons();
    });

    // --- DATA RENDERING FUNCTIONS ---
    function renderDashboardAlerts() {
        const container = document.getElementById('dashboard-alerts');
        container.innerHTML = '';
        mockSurveillanceAlerts.slice(0, 3).forEach(alert => {
            const severityColors = { High: 'red', Medium: 'yellow', Low: 'blue' };
            const color = severityColors[alert.severity] || 'gray';
            const alertEl = document.createElement('div');
            alertEl.className = `flex items-start p-4 rounded-lg border-l-4 border-${color}-500 bg-slate-50`;
            alertEl.innerHTML = `
                <div class="flex-shrink-0"><i data-lucide="alert-triangle" class="text-${color}-500"></i></div>
                <div class="ml-3">
                    <p class="font-semibold text-slate-800">${alert.type}</p>
                    <p class="text-sm text-slate-600">${alert.details} (Client: ${alert.client})</p>
                </div>
            `;
            container.appendChild(alertEl);
        });
    }

    function renderComplianceTable() {
        const tbody = document.getElementById('compliance-table');
        tbody.innerHTML = '';
        mockComplianceTasks.forEach(item => {
            const statusClasses = {
                Completed: 'bg-green-100 text-green-800',
                Pending: 'bg-yellow-100 text-yellow-800',
                'On Track': 'bg-blue-100 text-blue-800'
            };
            const row = document.createElement('tr');
            row.className = 'border-b hover:bg-slate-50';
            row.innerHTML = `
                <td class="p-4 font-medium">${item.task}</td>
                <td class="p-4">${item.freq}</td>
                <td class="p-4">${item.due}</td>
                <td class="p-4"><span class="px-2 py-1 text-xs font-semibold rounded-full ${statusClasses[item.status]}">${item.status}</span></td>
                <td class="p-4"><button class="text-blue-600 hover:underline text-sm">View Details</button></td>
            `;
            tbody.appendChild(row);
        });
    }

    function renderSurveillanceTable() {
        const tbody = document.getElementById('surveillance-table');
        tbody.innerHTML = '';
        mockSurveillanceAlerts.forEach(alert => {
             const severityClasses = {
                High: 'bg-red-100 text-red-800',
                Medium: 'bg-yellow-100 text-yellow-800',
                Low: 'bg-blue-100 text-blue-800'
            };
            const row = document.createElement('tr');
            row.className = 'border-b hover:bg-slate-50';
            row.innerHTML = `
                <td class="p-4 font-medium">${alert.type}</td>
                <td class="p-4">${alert.client}</td>
                <td class="p-4">${alert.details}</td>
                <td class="p-4">${alert.timestamp}</td>
                <td class="p-4"><span class="px-2 py-1 text-xs font-semibold rounded-full ${severityClasses[alert.severity]}">${alert.severity}</span></td>
            `;
            tbody.appendChild(row);
        });
    }

    // --- CHART INITIALIZATION ---
    let revenueChartInstance, securitiesChartInstance;

    function initAnalyticsCharts() {
        const revenueCtx = document.getElementById('revenueChart');
        const securitiesCtx = document.getElementById('securitiesChart');

        if (revenueChartInstance) revenueChartInstance.destroy();
        revenueChartInstance = new Chart(revenueCtx, {
            type: 'bar',
            data: {
                labels: ['Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                datasets: [{
                    label: 'Revenue',
                    data: [12.5, 19.2, 15.3, 18.1, 22.4, 25.8],
                    backgroundColor: 'rgba(59, 130, 246, 0.7)',
                    borderColor: 'rgba(59, 130, 246, 1)',
                    borderWidth: 1,
                    borderRadius: 5
                }]
            },
            options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });

        if (securitiesChartInstance) securitiesChartInstance.destroy();
        securitiesChartInstance = new Chart(securitiesCtx, {
            type: 'doughnut',
            data: {
                labels: ['Reliance', 'TCS', 'HDFC Bank', 'Infosys', 'Other'],
                datasets: [{
                    label: 'Trade Volume',
                    data: [300, 250, 200, 150, 100],
                    backgroundColor: ['#1d4ed8', '#1e40af', '#1e3a8a', '#2563eb', '#60a5fa'],
                    hoverOffset: 4
                }]
            },
            options: { responsive: true }
        });
    }
</script>

</body>
</html>

